# 紧急情况

*翻译自：https://github.com/google/eng-practices/blob/master/review/emergencies.md*

有时，会有一些紧急的CL，需要尽快通过整个代码审查过程。

## 什么是紧急情况？

紧急CL是一些小的改动：让主要发布过程得以继续而不需要回滚；修复生产环境中对用户有重大影响的bug；处理一个紧迫的法律问题，关闭一个严重的安全漏洞...

在紧急情况下，需要关注整个代码审查过程的速度，而不单单是[响应的速度](reviewer/speed.md)。只有在紧急情况下，reviewer才可以把review速度和代码正确性看的比其他任何事情都重要，特别需要关注CL是否确切解决了紧急问题。另外，很明显的，紧急CL的CR请求的优先级是最高的。

当然，在解决紧急情况之后，你应该再次查看紧急CL，并对其进行[更彻底的review](reviewer/looking-for.md)。

## 哪些情况并不紧急？

下面是一些并不紧急的例子：
+ 希望本周发布，而不是等下周（除非有一个“硬”限期，比如合作协议的约定）。
+ developer已经在一个特性桑工作很长一段时间了，急切的想让其通过。
+ reviewer在另一个时区的晚上，或者reviewer当前不在工位。
+ 今天是周五，且快要下班了，最好赶在developer离开之前通过。
+ 经理说马上就要到最后限期了（注意这种最后期限并不是“硬”限期，而是“软”限期），今天必须通过review并合入代码。
+ 回滚导致测试失败或构建损坏的CL。

还有其他类似的，可以触类旁通。

## 什么是“硬”限期？

“硬”限期是这样的时间节点，如果你没能在该时间节点之前搞定，就会发生灾难性的事件。例如：

+ 要履行合同义务，必须在特定日期之前提交CL。
+ 如果产品没有在特定的日期发布，将在市场竞争中完全失败。
+ 一些硬件制造商每年只发布一次新硬件。如果你错过了向他们提交代码的最后期限，那将是灾难性的。当然，这取决于你要提交的是什么类型的代码。

将发行推迟一周并不是灾难性的。错过一个重要的会议可能是灾难性的，但通常不是。

大多数限期都是“软”限期，而不是“硬”限期。它们表示在一定时间内需要完成某个特性的愿望。它们很重要，但是您不应该为了这些而牺牲代码的健康。

如果发布周期很长（例如好几周），就会经常想着暂时纳入一些质量不那么好的CL，打算在下个周期里面去再去完善。然而，如果不断出现这种情况，就会积累大量技术债，这也是技术债累积的最常见方式。如果developer经常在周期结束时才提交CL，为了不延期（注意，这个往往是”软“限期）不得不只做一些表面的审查而让其合入，这种情况下，团队需要优化研发流程，以使大型功能更改可以在周期的早期进行，并有足够的时间进行良好的review。
